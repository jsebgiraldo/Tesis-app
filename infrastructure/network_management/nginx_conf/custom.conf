# Override upstream resolution to refresh DNS per request
resolver 127.0.0.11 valid=10s ipv6=off;

# Map dashboard upstream using DNS resolution rather than cached IP
upstream dashboard_upstream {
    zone dashboard_up 64k;
    server dashboard:8000 resolve;
}

# Map api upstream similarly (future-proof)
upstream api_upstream {
    zone api_up 64k;
    server api:8000 resolve;
}
