# OpenThread Configuration
CONFIG_OPENTHREAD_ENABLED=y
CONFIG_OPENTHREAD_CLI=y
CONFIG_OPENTHREAD_LOG_LEVEL_DYNAMIC=y
CONFIG_OPENTHREAD_LOG_LEVEL_INFO=y

# Watchdog Configuration
# Deshabilitar Task Watchdog porque OpenThread mainloop bloquea CPU
CONFIG_ESP_TASK_WDT_EN=n

# Thread Network Configuration - Valores se configuran en c贸digo
# CONFIG_OPENTHREAD_NETWORK_NAME se maneja en c贸digo
# CONFIG_OPENTHREAD_NETWORK_CHANNEL se maneja en c贸digo
# CONFIG_OPENTHREAD_NETWORK_PANID se maneja en c贸digo
# CONFIG_OPENTHREAD_NETWORK_EXTPANID debe ser hex sin comillas
# CONFIG_OPENTHREAD_NETWORK_MASTERKEY debe ser hex sin comillas

# ESP32C6 Radio Configuration
CONFIG_IEEE802154_ENABLED=y
CONFIG_IEEE802154_RX_BUFFER_SIZE=20
CONFIG_IEEE802154_SLEEP_ENABLE=y

# FreeRTOS Configuration
CONFIG_FREERTOS_HZ=1000
CONFIG_FREERTOS_UNICORE=n

# Logging
CONFIG_LOG_DEFAULT_LEVEL_INFO=y
CONFIG_LOG_MAXIMUM_LEVEL_VERBOSE=y

# lwIP Configuration
CONFIG_LWIP_TCPIP_TASK_STACK_SIZE=4096
CONFIG_LWIP_IPV6_NUM_ADDRESSES=8
CONFIG_LWIP_MULTICAST_PING=y
CONFIG_LWIP_HOOK_IP6_SELECT_SRC_ADDR_CUSTOM=y

# Thread Features
CONFIG_OPENTHREAD_BORDER_ROUTER=n
CONFIG_OPENTHREAD_COMMISSIONER=n
CONFIG_OPENTHREAD_JOINER=n
CONFIG_OPENTHREAD_DIAG=y
# Disable DUA to suppress warning (not needed for basic Thread functionality)
CONFIG_OPENTHREAD_DUA=n

# ESP System Settings
CONFIG_ESP_MAIN_TASK_STACK_SIZE=8192
CONFIG_ESP_SYSTEM_EVENT_TASK_STACK_SIZE=4096
# Usar USB Serial/JTAG para console (XIAO ESP32-C6)
CONFIG_ESP_CONSOLE_USB_SERIAL_JTAG=y

# Partition Table - Custom with OTA support
CONFIG_PARTITION_TABLE_CUSTOM=y
CONFIG_PARTITION_TABLE_CUSTOM_FILENAME="partitions.csv"
CONFIG_PARTITION_TABLE_FILENAME="partitions.csv"

# Flash Configuration - ESP32-C6 XIAO has 4MB flash
CONFIG_ESPTOOLPY_FLASHSIZE_4MB=y
CONFIG_ESPTOOLPY_FLASHSIZE="4MB"

# Optimization
CONFIG_COMPILER_OPTIMIZATION_SIZE=y

# Compiler Warnings - Disable implicit-function-declaration error for Anjay compatibility
CONFIG_COMPILER_WARN_WRITE_STRINGS=n

# mbedTLS Configuration (required for LwM2M/Anjay)
# Basic TLS/DTLS
CONFIG_MBEDTLS_TLS_ENABLED=y
CONFIG_MBEDTLS_CERTIFICATE_BUNDLE=y
CONFIG_MBEDTLS_CERTIFICATE_BUNDLE_DEFAULT_FULL=y
CONFIG_MBEDTLS_SSL_PROTO_TLS1_2=y
CONFIG_MBEDTLS_SSL_PROTO_DTLS=y
CONFIG_MBEDTLS_SSL_MAX_CONTENT_LEN=16384
CONFIG_MBEDTLS_SSL_IN_CONTENT_LEN=16384
CONFIG_MBEDTLS_SSL_OUT_CONTENT_LEN=16384

# PSK (Pre-Shared Key) Support - CRITICAL for Anjay
CONFIG_MBEDTLS_PSK_MODES=y
CONFIG_MBEDTLS_KEY_EXCHANGE_PSK=y
CONFIG_MBEDTLS_KEY_EXCHANGE_DHE_PSK=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_PSK=y
CONFIG_MBEDTLS_KEY_EXCHANGE_RSA_PSK=y

# Disable conflicting options
CONFIG_MBEDTLS_SSL_PROTO_TLS1=n
CONFIG_MBEDTLS_SSL_PROTO_TLS1_1=n

# Elliptic Curve Support
CONFIG_MBEDTLS_ECDH_C=y
CONFIG_MBEDTLS_ECDSA_C=y
CONFIG_MBEDTLS_ECP_C=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_ECDSA=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_RSA=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDH_ECDSA=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDH_RSA=y

# Additional ciphers
CONFIG_MBEDTLS_CCM_C=y
CONFIG_MBEDTLS_GCM_C=y
CONFIG_MBEDTLS_AES_C=y
CONFIG_MBEDTLS_SHA256_C=y

# Enable client/server modes
CONFIG_MBEDTLS_TLS_CLIENT=y
CONFIG_MBEDTLS_TLS_SERVER=n

# Anjay/LwM2M Configuration
CONFIG_ANJAY_WITH_LOGS=y
CONFIG_ANJAY_WITH_TRACE_LOGS=n
CONFIG_ANJAY_WITH_MODULE_ACCESS_CONTROL=y
CONFIG_ANJAY_WITH_MODULE_SECURITY=y
CONFIG_ANJAY_WITH_MODULE_SERVER=y
